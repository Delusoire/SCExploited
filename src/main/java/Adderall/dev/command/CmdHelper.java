package Adderall.dev.command;

import java.lang.reflect.Field;

import net.minecraft.util.Timer;
import net.minecraft.util.MovingObjectPosition;

import static Adderall.dev.Main.mc;
import static java.lang.Integer.parseInt;

public class CmdHelper {

    public static int[] parsePos(String[] args, int i) throws Exception {
        if (args.length < i + 2) throw new Exception();
        return new int[] { parseInt(args[i]), parseInt(args[++i]), parseInt(args[++i]) };
    }

    public static int[] parsePosOrDef(String[] args, int i) throws Exception {
        try {
            return parsePos(args, i);
	} catch (Exception e) {
            final Field timer = mc.getClass().getDeclaredField("field_71428_T"); // timer
            timer.setAccessible(true);
            MovingObjectPosition b = mc.thePlayer.rayTrace(30D,
                    ((Timer) timer.get(mc)).renderPartialTicks);
            return new int[] { b.blockX, b.blockY, b.blockZ };
	}
    }
}
